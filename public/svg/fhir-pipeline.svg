<svg viewBox="0 0 1000 750" preserveAspectRatio="xMidYMid slice" fill="none" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="cs-hs"><feDropShadow dx="4" dy="4" stdDeviation="0" flood-color="#3a3535" flood-opacity="1"/></filter>
  </defs>

  <!-- Stage 1: Upload (orange) — multiple small blocks feeding in -->
  <rect x="140" y="50" width="100" height="70" fill="#ffa878" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="155" y="70" width="40" height="4" fill="#3a3535" opacity="0.25"/>
  <rect x="155" y="80" width="60" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="155" y="88" width="50" height="3" fill="#3a3535" opacity="0.1"/>

  <rect x="340" y="50" width="100" height="70" fill="#ffa878" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="355" y="70" width="45" height="4" fill="#3a3535" opacity="0.25"/>
  <rect x="355" y="80" width="55" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="355" y="88" width="65" height="3" fill="#3a3535" opacity="0.1"/>

  <rect x="540" y="50" width="100" height="70" fill="#ffa878" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="555" y="70" width="50" height="4" fill="#3a3535" opacity="0.25"/>
  <rect x="555" y="80" width="65" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="555" y="88" width="45" height="3" fill="#3a3535" opacity="0.1"/>

  <rect x="740" y="50" width="100" height="70" fill="#ffa878" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="755" y="70" width="55" height="4" fill="#3a3535" opacity="0.25"/>
  <rect x="755" y="80" width="60" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="755" y="88" width="50" height="3" fill="#3a3535" opacity="0.1"/>

  <!-- Flow lines: uploads converge down -->
  <path d="M 190,120 L 190,150 L 500,170" stroke="#3a3535" stroke-width="2" opacity="0.1"/>
  <path d="M 390,120 L 390,145 L 500,170" stroke="#3a3535" stroke-width="2" opacity="0.1"/>
  <path d="M 590,120 L 590,145 L 500,170" stroke="#3a3535" stroke-width="2" opacity="0.1"/>
  <path d="M 790,120 L 790,150 L 500,170" stroke="#3a3535" stroke-width="2" opacity="0.1"/>

  <!-- Arrow down to stage 2 -->
  <line x1="500" y1="170" x2="500" y2="200" stroke="#3a3535" stroke-width="2" opacity="0.12"/>
  <polygon points="495,200 505,200 500,210" fill="#3a3535" opacity="0.2"/>

  <!-- Stage 2: Review & Validate (blue) — wide block -->
  <rect x="300" y="215" width="400" height="130" fill="#7fb4e0" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="330" y="242" width="55" height="5" fill="#3a3535" opacity="0.25"/>
  <line x1="330" y1="260" x2="670" y2="260" stroke="#3a3535" stroke-width="1" opacity="0.1"/>
  <!-- Checklist rows inside -->
  <rect x="330" y="275" width="340" height="18" fill="rgba(250,247,242,0.4)" stroke="#3a3535" stroke-width="1.5"/>
  <rect x="345" y="281" width="8" height="8" fill="#ffe480" stroke="#3a3535" stroke-width="1"/>
  <rect x="362" y="282" width="80" height="4" fill="#3a3535" opacity="0.12"/>
  <rect x="330" y="300" width="340" height="18" fill="rgba(250,247,242,0.3)" stroke="#3a3535" stroke-width="1.5"/>
  <rect x="345" y="306" width="8" height="8" fill="#ffe480" stroke="#3a3535" stroke-width="1"/>
  <rect x="362" y="307" width="100" height="4" fill="#3a3535" opacity="0.12"/>
  <rect x="362" y="332" width="70" height="4" fill="#3a3535" opacity="0.12"/>

  <!-- Arrow down to stage 3 -->
  <line x1="500" y1="345" x2="500" y2="395" stroke="#3a3535" stroke-width="2" opacity="0.12"/>
  <polygon points="495,395 505,395 500,405" fill="#3a3535" opacity="0.2"/>

  <!-- Stage 3: Version (yellow) — medium block -->
  <rect x="350" y="410" width="300" height="110" fill="#ffe480" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="380" y="435" width="50" height="5" fill="#3a3535" opacity="0.25"/>
  <line x1="380" y1="453" x2="620" y2="453" stroke="#3a3535" stroke-width="1" opacity="0.1"/>
  <!-- Version tags -->
  <rect x="380" y="465" width="55" height="16" fill="rgba(250,247,242,0.5)" stroke="#3a3535" stroke-width="1.5"/>
  <rect x="390" y="471" width="30" height="4" fill="#3a3535" opacity="0.15"/>
  <rect x="450" y="465" width="55" height="16" fill="rgba(250,247,242,0.5)" stroke="#3a3535" stroke-width="1.5"/>
  <rect x="460" y="471" width="35" height="4" fill="#3a3535" opacity="0.15"/>
  <rect x="520" y="465" width="55" height="16" fill="#ffa878" stroke="#3a3535" stroke-width="1.5" opacity="0.6"/>
  <rect x="530" y="471" width="30" height="4" fill="#3a3535" opacity="0.2"/>
  <!-- Progress bar -->
  <rect x="380" y="496" width="240" height="8" fill="rgba(250,247,242,0.3)" stroke="#3a3535" stroke-width="1"/>
  <rect x="380" y="496" width="180" height="8" fill="#ffa878" stroke="#3a3535" stroke-width="1"/>

  <!-- Arrow down to stage 4 -->
  <line x1="500" y1="520" x2="500" y2="570" stroke="#3a3535" stroke-width="2" opacity="0.12"/>
  <polygon points="495,570 505,570 500,580" fill="#3a3535" opacity="0.2"/>

  <!-- Stage 4: Release / FHIR server (blue) -->
  <rect x="350" y="585" width="300" height="100" fill="#7fb4e0" stroke="#3a3535" stroke-width="2.5" filter="url(#cs-hs)"/>
  <rect x="380" y="608" width="60" height="5" fill="#3a3535" opacity="0.25"/>
  <line x1="380" y1="626" x2="620" y2="626" stroke="#3a3535" stroke-width="1" opacity="0.1"/>
  <rect x="380" y="640" width="100" height="4" fill="#3a3535" opacity="0.12"/>
  <rect x="380" y="650" width="80" height="4" fill="#3a3535" opacity="0.1"/>
  <rect x="380" y="660" width="120" height="4" fill="#3a3535" opacity="0.08"/>
  <!-- Status indicator -->
  <circle cx="620" cy="650" r="8" fill="#ffe480" stroke="#3a3535" stroke-width="1.5"/>

  <!-- Side decorations -->
  <!-- Small satellite blocks on left -->
  <rect x="100" y="260" width="60" height="40" fill="#ffa878" stroke="#3a3535" stroke-width="1.5" opacity="0.25"/>
  <rect x="110" y="272" width="30" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="110" y="280" width="25" height="3" fill="#3a3535" opacity="0.08"/>
  <line x1="160" y1="280" x2="300" y2="280" stroke="#3a3535" stroke-width="1" opacity="0.06" stroke-dasharray="4 4"/>

  <!-- Small satellite blocks on right -->
  <rect x="840" y="440" width="60" height="40" fill="#ffa878" stroke="#3a3535" stroke-width="1.5" opacity="0.25"/>
  <rect x="850" y="452" width="30" height="3" fill="#3a3535" opacity="0.12"/>
  <rect x="850" y="460" width="25" height="3" fill="#3a3535" opacity="0.08"/>
  <line x1="840" y1="460" x2="650" y2="460" stroke="#3a3535" stroke-width="1" opacity="0.06" stroke-dasharray="4 4"/>

  <!-- Flow dots -->
  <circle cx="500" cy="185" r="3" fill="#3a3535" opacity="0.1"/>
  <circle cx="500" cy="370" r="3" fill="#3a3535" opacity="0.1"/>
  <circle cx="500" cy="548" r="3" fill="#3a3535" opacity="0.1"/>

  <!-- Dust -->
  <rect x="80" y="160" width="5" height="5" fill="#3a3535" opacity="0.08"/>
  <rect x="920" y="300" width="5" height="5" fill="#3a3535" opacity="0.06"/>
  <rect x="120" y="620" width="5" height="5" fill="#3a3535" opacity="0.06"/>
  <rect x="900" y="600" width="5" height="5" fill="#3a3535" opacity="0.08"/>
</svg>
